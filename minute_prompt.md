# 議事録作成アプリ 現状仕様書

最終更新: 2026-02-25

## 1. 概要

Teams会議の音声/動画ファイルを入力し、Whisperで文字起こし、GPTで議事録を構造化して生成するStreamlitアプリ。生成結果は画面表示・ダウンロード・ローカル保存が可能。

## 2. 現在の技術スタック

- フロントエンド/バックエンド: Streamlit (Python)
- 文字起こし: OpenAI `whisper-1`
- 要約・構造化: OpenAI `gpt-4o-mini`
- 音声処理: `pydub` + `ffmpeg` / `ffprobe`
- 環境変数管理: `python-dotenv`（`.env`の`OPENAI_API_KEY`を使用）
- 出力先: ローカルフォルダ `output/`

## 3. 実装済み機能

### 3.1 入力

- 対応アップロード形式: `mp3` / `m4a` / `mp4`
- ファイルサイズ上限の選択: `25MB` または `75MB`
- 会議情報入力: サイボウズOffice予定情報をテキストエリアに貼り付け
- 操作ボタン: 「議事録生成」「クリア」

### 3.2 前処理

- `mp4`入力時は音声抽出を実施（`ffmpeg`）
- `ffprobe`で音声トラック有無を確認し、音声なし動画をエラー化
- Whisper制限（25MB）超過時は自動分割して逐次文字起こし

### 3.3 AI処理

- Whisperで文字起こし（分割時は結合）
- GPTで以下の構造に要約
	- 会議基本情報（会議名/日時/参加者/場所・URL）
	- 議題の説明
	- 主な発言
	- 決定事項
- 会議基本情報は、入力テキストからの正規表現抽出をフォールバックとして利用

### 3.4 出力

- 画面上に議事録を表示
- 画面からテキストダウンロード
	- `議事録.txt`
	- `文字起こし生データ.txt`
- ローカル保存ボタン
	- `output/議事録.txt`
	- `output/文字起こし生データ.txt`

### 3.5 エラーハンドリング

- APIキー未設定、サイズ超過、音声抽出失敗、文字起こし/要約失敗、保存失敗を画面表示

## 4. 画面仕様（現状）

- サイドバーは未使用
- メイン画面に以下を縦配置
	1. サイズ上限ラジオ（25MB/75MB）
	2. ファイルアップローダー
	3. 会議情報入力テキストエリア
	4. 「議事録生成」「クリア」ボタン
	5. 生成結果表示 + ダウンロード/ローカル保存ボタン

## 5. 実装上の補足

- APIキーはUI入力ではなく`.env`依存
- 保存先フォルダは固定（`output/`）
- 3ヶ月削除用の関数は存在するが、現状フローでは未実行

## 6. 未実装・今後の課題

- 話者分離（だれが発言したかの識別）
- 保存先フォルダのユーザー指定
- SQLite等でのメタデータ管理
- 保存データ保持期間（3ヶ月）を実運用で自動適用する定期クリーンアップ